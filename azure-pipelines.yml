trigger:
- master
- test_windows

jobs:
- job: mvn_test
  strategy:
    matrix:
      linux:
        imageName: 'Ubuntu-16.04'
      mac:
        imageName: 'macos-10.13'
      windows:
        imageName: 'windows-2019'
  pool:
    vmImage: $(imageName)
  steps:
  - script: ./mvnw -B package -Ptest
- job: mvn_jruby_complete_jar_extended
  strategy:
    matrix:
      linux:
        imageName: 'Ubuntu-16.04'
      mac:
        imageName: 'macos-10.13'
      windows:
        imageName: 'windows-2019'
  pool:
    vmImage: $(imageName)
  steps:
  - script: ./mvnw -B package -Pjruby_complete_jar_extended -Dinvoker.skip=true
